context:
  name: commitlint-rs
  version: "0.2.3"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/keisukeyamashita/${{ name }}/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 9c599fae4e0d6b66ba256e30b5a94b214586ae4778e721aa176f905ae332e078

build:
  number: 2
  script:
    env:
      CARGO_PROFILE_RELEASE_STRIP: symbols
      CARGO_PROFILE_RELEASE_LTO: fat
    content:
      - cargo install --locked --no-track --bins --root "${{ PREFIX }}" --path cli/
      - cargo-bundle-licenses --format yaml --output THIRDPARTY.yml

requirements:
  build:
    - ${{ compiler("rust") }}
    - ${{ stdlib("c") }}
    - cargo-bundle-licenses
    - cargo-auditable

tests:
  - package_contents:
      bin:
        - commitlint
  - script:
      - commitlint --help

about:
  homepage: https://keisukeyamashita.github.io/commitlint-rs/
  documentation: https://keisukeyamashita.github.io/commitlint-rs/
  repository: https://github.com/keisukeyamashita/commitlint-rs
  summary: Lint commit messages with conventional commit messages
  description: |
    Guard rail for your commit messages for sustainable development
  license: MIT OR Apache-2.0
  license_file:
    - LICENSE-MIT
    - LICENSE-APACHE
    - THIRDPARTY.yml

extra:
  recipe-maintainers:
    - KeisukeYamashita
    - AntoinePrv
