context:
  name: aiida-fans
  version: "0.2.2"
  python_min: "3.11"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/DataAnalyticsEngineering/AiiDa-FANS/archive/refs/tags/v${{ version }}.tar.gz
  sha256: F4C8C27D850F9408882ACEFCA5288EEAEE0A6E6E76077754A39042AFD3381407

build:
  noarch: python
  script:
    content: python -m pip install . -vv
    env:
      SETUPTOOLS_SCM_PRETEND_VERSION: ${{ version }}
  number: 0

requirements:
  host:
    - python ${{ python_min }}.*
    - pip
    - setuptools >=64.0.0
    - setuptools-scm >=8.0.0
  run:
    - python >=${{ python_min }}
    - aiida-core >=2.7.1
    - h5py >=3.9.0

tests:
  - python:
      imports:
        - aiida_fans
      pip_check: true
      python_version: ${{ python_min }}.*
  - if: osx or linux
    then:
      - script:
          - verdi plugin list aiida.calculations fans
        requirements:
          run:
            - python ${{ python_min }}.*

about:
  homepage: https://github.com/DataAnalyticsEngineering/AiiDA-FANS
  summary: 'AiiDA plugin for FANS, an FFT-based homogenization solver.'
  description: |
    This is a plugin for AiiDA that facilitates the use of FANS. FANS is an FFT-based homogenisation solver for microscale and multiphysics problems. It is an open-source project under active development at the Institute of Applied Mechanics, University of Stuttgart. This plugin aims to bring the full value of provenance tracking and database integration to the results produced by FANS.
  license: LGPL-3.0-only
  license_file: LICENSE
  documentation: https://dataanalyticsengineering.github.io/AiiDA-FANS/

extra:
  recipe-maintainers:
    - ethan-shanahan
    - EMMAOpenSource
    - sanathkeshav
    - claudiushaag
