schema_version: 1

context:
  name: pegasus-wms
  version: 5.1.1

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/${{ name | replace('-', '_') }}-${{ version }}.tar.gz
  sha256: d77d6952a0674f74dfe3df3486eb5b97a7eae08636b6eb18e50e140295668d90

build:
  number: 0
  noarch: python
  script: ${{ PYTHON }} -m pip install . -vv

requirements:
  host:
    - pip
    - python ${{ python_min }}.*
    - setuptools
    - wheel
  run:
    - flask >1.1,<2.3
    - flask-caching >1.8
    - gitpython >1.0
    - pamela >=1.0,<1.1.0
    - pegasus-wms.api
    - pegasus-wms.common
    - pegasus-wms.worker
    - pika >=1.1.0
    - python >=${{ python_min }}
    - pyyaml >5.3
    - requests >2.23
    - sqlalchemy >1.3,<1.4
    - werkzeug <3.1.0

tests:
  - python:
      imports:
        - Pegasus
      pip_check: true
      python_version: ${{ python_min }}.*

about:
  summary: Pegasus Workflow Management System Python API
  description: |
    Pegasus Workflow Management System Python API
    =============================================

    This package contains the Python APIs for Pegasus WMS, including:

    1. The DAX API (Versions 2 and 3)
    2. The PDAX API (Version 2)
    3. The monitoring API
    4. The Stampede database API
    5. The Pegasus statistics API
    6. The Pegasus plots API
    7. Misc. Pegasus utilities
    8. The pegasus service, including the ensemble manager and dashboard
  homepage: http://pegasus.isi.edu
  repository: https://github.com/pegasus-isi/pegasus.git
  documentation: https://pegasus.isi.edu/documentation/
  license: Apache-2.0
  license_file: LICENSE

extra:
  recipe-maintainers:
    - duncanmmacleod
    - mayani
    - rynge
