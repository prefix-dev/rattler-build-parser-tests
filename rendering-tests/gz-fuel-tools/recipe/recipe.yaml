schema_version: 1

context:
  component_name: fuel-tools
  cmake_name: fuel_tools
  repo_name: ${{ "gz-" + component_name }}
  version: 11.0.0
  major_version: "11"
  name: ${{ repo_name }}
  component_version: ${{ component_name + major_version }}
  cmake_version: ${{ cmake_name + major_version }}
  cxx_name: ${{ "lib" + name }}

recipe:
  name: ${{ name }}
  version: ${{ version }}

source:
  - url: https://github.com/gazebosim/${{ repo_name }}/archive/${{ repo_name }}${{ major_version }}_${{ version }}.tar.gz
    sha256: 508ee5f0c8e9ab43effa6ce307736f146914bb22580cd154d7e09b67e4838c54

build:
  number: 0

outputs:
  - package:
      name: ${{ cxx_name }}
    build:
      script:
        - if: unix
          then: build_cxx.sh
        - if: win
          then: bld_cxx.bat
    requirements:
      build:
        - ${{ compiler('cxx') }}
        - ${{ compiler('c') }}
        - ${{ stdlib('c') }}
        - cmake
        - ninja
        - pkg-config
      host:
        - libgz-cmake
        - libgz-math
        - libgz-msgs
        - libgz-common
        - libgz-tools
        - libcurl
        - jsoncpp
        - libzip
        - yaml
        - tinyxml2
        - libprotobuf
      run_exports:
        - ${{ pin_subpackage(cxx_name, upper_bound='x') }}
    tests:
      - package_contents:
          include:
            - gz/${{ cmake_version }}/gz/${{ cmake_name }}.hh
          lib:
            - gz-${{ cmake_name }}
      - script:
          - cmake-package-check gz-${{ cmake_name }} --targets gz-${{ cmake_name }}::gz-${{ cmake_name }}
        requirements:
          run:
            - cmake-package-check
            - ${{ compiler('c') }}
            - ${{ compiler('cxx') }}

  - package:
      name: ${{ name }}
    requirements:
      run:
        - ${{ pin_subpackage(cxx_name, exact=True) }}
      run_exports:
        - ${{ pin_subpackage(cxx_name, upper_bound='x') }}
    tests:
      - script:
          - cmake-package-check gz-${{ cmake_name }} --targets gz-${{ cmake_name }}::gz-${{ cmake_name }}
        requirements:
          run:
            - cmake-package-check
            - ${{ compiler('c') }}
            - ${{ compiler('cxx') }}
about:
  homepage: https://github.com/gazebosim/${{ repo_name }}
  license: Apache-2.0
  license_file: LICENSE
  summary: A client library and command line tools for interacting with Gazebo Fuel servers.

extra:
  feedstock-name: ${{ repo_name }}
  recipe-maintainers:
    - traversaro
    - Tobias-Fischer
