schema_version: 1

context:
  name: trio
  version: 0.32.0

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/${{ name }}-${{ version }}.tar.gz
  sha256: 150f29ec923bcd51231e1d4c71c7006e65247d68759dd1c19af4ea815a25806b

build:
  number: 1
  skip: match(python, "<3.10")
  script: ${{ PYTHON }} -m pip install . --no-deps --no-build-isolation -vv

requirements:
  build:
    - if: build_platform != target_platform
      then:
        - python
        - cross-python_${{ target_platform }}
  host:
    - python
    - pip
    - setuptools >=64
  run:
    - python
    - attrs >=23.2.0
    - sortedcontainers
    - idna
    - outcome
    - sniffio >=1.3.0
    - if: win and not python_impl == 'pypy'
      then: cffi >=1.14
    - if: match(python, "<3.11")
      then: exceptiongroup

    - cffi >=1.14
tests:
  - python:
      imports:
        - trio
        - trio.testing
      pip_check: true

about:
  license: MIT
  license_file: LICENSE
  summary: An async/await-native I/O library for humans and snake people
  homepage: https://github.com/python-trio/trio
  repository: https://github.com/python-trio/trio
  documentation: https://trio.readthedocs.io/

extra:
  recipe-maintainers:
    - dhirschfeld
    - nicoddemus
    - synapticarbors
