schema_version: 1

context:
  name: unixODBC
  version: 2.3.14

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: http://www.unixodbc.org/${{ name }}-${{ version }}.tar.gz
  sha256: 4e2814de3e01fc30b0b9f75e83bb5aba91ab0384ee951286504bb70205524771

build:
  number: 0
  skip: win

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib("c") }}
    - ${{ compiler('cxx') }}
    - automake
    - libtool
    - make
  host:
    - libiconv
    - libedit
  run_exports:
    - ${{ pin_subpackage('unixodbc', upper_bound='x.x') }}

tests:
  - script:
      - if: osx
        then: test -f $PREFIX/lib/libodbc.2.dylib
      - if: osx
        then: test -f $PREFIX/lib/libodbc.dylib
      - if: osx
        then: test -f $PREFIX/lib/libodbcinst.2.dylib
      - if: osx
        then: test -f $PREFIX/lib/libodbcinst.dylib
      - if: linux
        then: test -f $PREFIX/lib/libodbc.so.2.0.0
      - if: linux
        then: test -f $PREFIX/lib/libodbc.so
      - if: linux
        then: test -f $PREFIX/lib/libodbcinst.so.2.0.0
      - if: linux
        then: test -f $PREFIX/lib/libodbcinst.so

about:
  license: LGPL-2.1-only
  license_file: COPYING
  summary: ODBC on non MS Windows platforms
  description: |
    The unixODBC Project goals are to develop and promote unixODBC to be the
    definitive standard for ODBC on non MS Windows platforms. This is to
    include GUI support for both KDE and GNOME.
  homepage: http://www.unixodbc.org/

extra:
  recipe-maintainers:
    - MathMagique
    - xhochy
    - mariusvniekerk
