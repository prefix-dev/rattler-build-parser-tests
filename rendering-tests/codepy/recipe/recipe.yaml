context:
  name: codepy
  version: "2025.1"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/codepy-${{ version }}.tar.gz
  sha256: ccc8365955050e827368ec0034c74cc3523a5cc60d8aff46a1a5345b769a9b75

build:
  number: 0
  noarch: python
  script: ${{ PYTHON }} -m pip install . -vv

requirements:
  host:
    - pip
    - python ${{ python_min }}.*
    - hatchling
  run:
    - cgen
    - platformdirs >=2.2.0
    - numpy >=1.6
    - python >=${{ python_min }}
    - pytools >=2022.1.14
    - typing_extensions >=4.5

tests:
  - script:
      - python -c "import codepy"
      - pip check
    requirements:
      run:
        - pip
        - python ${{ python_min }}.*

about:
  homepage: http://mathema.tician.de/software/codepy
  license: MIT
  license_file: LICENSE
  summary: Generate and execute native code at run time, from Python
  description: |
    CodePy is a C/C++ metaprogramming toolkit for Python. It helps you
    compile source code and dynamically load it into the Python
    interpreter. This facility also works in conjunction with with
    PyCuda. Dynamic compilation and linking are so far only supported
    in Linux with the GNU toolchain.
  documentation: http://mathema.tician.de/software/codepy
  repository: https://github.com/inducer/codepy

extra:
  recipe-maintainers:
    - inducer
    - jan-janssen
