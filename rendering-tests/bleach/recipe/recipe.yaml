# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  version: "6.3.0"
  python_check_max: "3.14"

recipe:
  name: bleach-split
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/b/bleach/bleach-${{ version }}.tar.gz
  sha256: 6f3b91b1c0a02bb9a78b5a454c92506aa0fdf197e1d5e114d2e00c6f64306d22

build:
  number: 0
  noarch: python

outputs:
  - package:
      name: bleach
    build:
      noarch: python
      script:
        - python -m pip install . -vv --no-deps --no-build-isolation --disable-pip-version-check
    requirements:
      host:
        - pip
        - python ${{ python_min }}.*
        - setuptools
      run:
        - python >=${{ python_min }}
        - webencodings
      run_constraints:
        - tinycss >=1.1.0,<1.5
    tests:
      - python:
          imports: bleach
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*

  - package:
      name: bleach-with-css
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("bleach", exact=true) }}
        # version is pinned in bleach
        - tinycss2
    tests:
      - python:
          imports: bleach.css_sanitizer
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: Easy, whitelist-based HTML-sanitizing tool (with [css])

about:
  homepage: https://github.com/mozilla/bleach
  license: Apache-2.0 AND MIT
  license_file:
    - LICENSE
    - bleach/_vendor/html5lib-1.1.dist-info/LICENSE
  summary: Easy, whitelist-based HTML-sanitizing tool
  description: |
    Bleach is an allowed-list-based HTML sanitizing library that escapes or
    strips markup and attributes.
  repository: https://github.com/mozilla/bleach
  documentation: https://bleach.readthedocs.io/

extra:
  feedstock-name: bleach
  recipe-maintainers:
    - minrk
    - ocefpaf
