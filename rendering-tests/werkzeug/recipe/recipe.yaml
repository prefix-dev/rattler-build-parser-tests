# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  version: "3.1.5"
  python_check_max: "3.14"
  cov_fail_under: "83"
  test_skip: not exclude_patterns

package:
  name: werkzeug
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/w/werkzeug/werkzeug-${{ version }}.tar.gz
  sha256: 6a548b0e88955dd07ccb25539d7d0cc97417ee9e179677d22c7041c8f078ce67

build:
  number: 0
  noarch: python
  script:
    - ${{ PYTHON }} -m pip install . --no-deps -vv --no-build-isolation --disable-pip-version-check

requirements:
  host:
    - flit-core <4
    - pip
    - python ${{ python_min }}.*
  run:
    - markupsafe >=2.1.1
    - python >=${{ python_min }}

tests:
  - python:
      imports: werkzeug
      pip_check: true
      python_version:
        - ${{ python_min }}.*
        - ${{ python_check_max }}.*
  - files:
      source:
        - tests/
        - pyproject.toml
    requirements:
      run:
        - coverage
        - cryptography
        - ephemeral-port-reserve
        - greenlet
        - mypy
        - pip
        - pytest
        - pytest-timeout
        - pytest-xprocess
        - python ${{ python_min }}.*
        - types-setuptools
        - watchdog
    script:
      - coverage run -m pytest -vv --tb=long --color=yes -k "${{ test_skip }}"
      - coverage report --fail-under=${{ cov_fail_under }}
      - mypy --disable-error-code unused-ignore -p werkzeug

about:
  license: BSD-3-Clause
  license_file: LICENSE.txt
  summary: The comprehensive WSGI web application library.
  description: |
    **_werkzeug_** German noun: "tool". Etymology: *werk* ("work"), *zeug* ("stuff")

    Werkzeug is a comprehensive [WSGI](https://wsgi.readthedocs.io/en/latest/) web application library. It began as
    a simple collection of various utilities for WSGI applications and has
    become one of the most advanced WSGI utility libraries.

    It includes:

    -   An interactive debugger that allows inspecting stack traces and
    source code in the browser with an interactive interpreter for any
    frame in the stack.
    -   A full-featured request object with objects to interact with
    headers, query args, form data, files, and cookies.
    -   A response object that can wrap other WSGI applications and handle
    streaming data.
    -   A routing system for matching URLs to endpoints and generating URLs
    for endpoints, with an extensible system for capturing variables
    from URLs.
    -   HTTP utilities to handle entity tags, cache control, dates, user
    agents, cookies, files, and more.
    -   A threaded WSGI server for use while developing applications
    locally.
    -   A test client for simulating HTTP requests during testing without
    requiring running a server.

    Werkzeug doesn't enforce any dependencies. It is up to the developer to
    choose a template engine, database adapter, and even how to handle
    requests. It can be used to build all sorts of end user applications
    such as blogs, wikis, or bulletin boards.

    [Flask](https://www.palletsprojects.com/p/flask/) wraps Werkzeug, using it to handle the details of WSGI while
    providing more structure and patterns for defining powerful
    applications.
  homepage: https://palletsprojects.com/p/werkzeug/
  repository: https://github.com/pallets/werkzeug
  documentation: https://werkzeug.palletsprojects.com/

extra:
  recipe-maintainers:
    - goanpeca
    - bollwyvl
