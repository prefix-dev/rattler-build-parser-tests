schema_version: 1

context:
  version: 1.4.48

package:
  name: tokyocabinet
  version: ${{ version }}

source:
  url: https://gitlab.com/patlefort/tokyocabinet/-/archive/v${{ version }}/tokyocabinet-v${{ version }}.tar.gz
  sha256: 7ac6676532be461a55b91eefa832b36e7118fca01b377d0ed3cad81580d3460d

build:
  number: 1005
  skip: win

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - ${{ compiler('cxx') }}
    - make
  host:
    - zlib
    - bzip2

tests:
  - script:
      - if: unix
        then: 
          - test -e $PREFIX/include/tcadb.h
          - test -e $PREFIX/lib/libtokyocabinet${SHLIB_EXT}
          - test -e $PREFIX/lib/libtokyocabinet.a
          - test -e $PREFIX/lib/pkgconfig/tokyocabinet.pc
          - tcbmgr version
          - echo foo | tcucodec zlib

about:
  license: LGPL-2.1-or-later
  license_file: COPYING
  summary: Tokyo Cabinet is a high performance key-value store written in C.
  description: |
    Tokyo Cabinet is a library of routines for managing a database.
    The database is a simple data file containing records, each is a pair
    of a key and a value. Every key and value is serial bytes with
    variable length. Both binary data and character string can be used as
    a key and a value. There is neither concept of data tables nor data
    types. Records are organized in hash table, B+ tree, or fixed-length
    array.

    Tokyo Cabinet is developed as the successor of GDBM and QDBM on the
    following purposes. They are achieved and Tokyo Cabinet replaces
    conventional DBM products.

    improves space efficiency : smaller size of database file.
    improves time efficiency : faster processing speed.
    improves parallelism : higher performance in multi-thread environment.
    improves usability : simplified API.
    improves robustness : database file is not corrupted even under catastrophic situation.
    supports 64-bit architecture : enormous memory space and database file are available.

    Tokyo Cabinet is written in the C language, and provided as API of
    C, Perl, Ruby, Java, and Lua. Tokyo Cabinet is available on platforms
    which have API conforming to C99 and POSIX. Tokyo Cabinet is a
    free software licensed under the GNU Lesser General Public License.
  homepage: http://fallabs.com/tokyocabinet

extra:
  recipe-maintainers:
    - aseyboldt
    - danielnachun
