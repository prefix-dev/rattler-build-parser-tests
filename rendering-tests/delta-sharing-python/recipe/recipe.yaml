# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  version: "1.4.1"
  python_check_max: "3.14"

package:
  name: delta-sharing-python
  version: ${{ version }}

source:
  - url: https://pypi.org/packages/source/d/delta-sharing/delta_sharing-${{ version }}.tar.gz
    sha256: 8132124399a9b94312a332fdb65c88037ec69b070bb81f3316b0f8ebec518587
  - url: https://raw.githubusercontent.com/delta-io/delta-sharing/refs/tags/py-v${{ version }}/LICENSE.txt
    sha256: 5a2ae634be68464e407b80dbece9d8d822926c9b2cbdb1e801f5d27929589802

build:
  number: 0
  noarch: python
  script:
    - ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation --disable-pip-version-check

requirements:
  host:
    - pip
    - python ${{ python_min }}.*
    - setuptools
  run:
    - aiohttp
    - delta-kernel-rust-sharing-wrapper >=0.3.1
    - fsspec >=0.7.4
    - jwcrypto >=1.5.6
    - pandas
    - pyarrow >=16.1.0
    - python >=${{ python_min }}
    - requests
    - yarl >=1.6.0

tests:
  - python:
      imports: delta_sharing
      pip_check: true
      python_version:
        - ${{ python_min }}.*
        - ${{ python_check_max }}.*

about:
  summary: Python Connector for Delta Sharing
  license: Apache-2.0
  license_file:
    - NOTICE.txt
    - LICENSE.txt
  homepage: https://pypi.org/project/delta-sharing
  repository: https://github.com/delta-io/delta-sharing

extra:
  recipe-maintainers:
    - bollwyvl
