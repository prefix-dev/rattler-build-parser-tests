schema_version: 1

context:
  name: google-cloud-trace
  version: "1.18.0"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/google_cloud_trace-${{ version }}.tar.gz
  sha256: 46d42b90273da3bc4850bb0d6b9a205eb826a54561ff1b30ca33cc92174c3f37

build:
  number: 0
  noarch: python
  script: ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation

requirements:
  host:
    - python ${{ python_min }}.*
    - pip
    - setuptools
  run:
    # excluding python 3.14 for now because we don't have the required grpcio on conda-forge
    - python >=${{ python_min }},<3.14
    - google-api-core >=1.34.1,<3.0.0,!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.*,!=2.4.*,!=2.5.*,!=2.6.*,!=2.7.*,!=2.8.*,!=2.9.*,!=2.10.*
    - google-api-core-grpc
    - google-auth >=2.14.1,<3.0.0,!=2.24.0,!=2.25.0
    # using looser constraint because we can't support the python >=3.14 constraint
    - grpcio >=1.33.2,<2.0.0
    # more restrictive version for python 3.13
    - proto-plus >=1.25.0,<2.0.0
    - protobuf >=3.20.2,<7.0.0,!=4.21.0,!=4.21.1,!=4.21.2,!=4.21.3,!=4.21.4,!=4.21.5

tests:
  - python:
      imports:
        - grpc
        - google.cloud.trace
        - google.cloud.trace_v1
        - google.cloud.trace_v2
      python_version: ${{ python_min }}.*
  - requirements:
      run:
        - python ${{ python_min }}.*
        - pip
    script:
      - pip check

about:
  summary: Google Cloud Trace API client library
  license: Apache-2.0
  license_file: LICENSE
  description: |
    The Stackdriver Trace API sends application trace data to Stackdriver Trace for viewing. Trace data is collected for all App Engine applications by default. Trace data from other applications can be provided using this API.
    See the [quick start guide](https://googleapis.dev/python/cloudtrace/latest/index.html#quick-start).

  homepage: https://github.com/googleapis/google-cloud-python/tree/main/packages/google-cloud-trace
  repository: https://github.com/googleapis/google-cloud-python/tree/main/packages/google-cloud-trace
  documentation: https://cloud.google.com/python/docs/reference/cloudtrace/latest

extra:
  recipe-maintainers:
    - xylar
    - parthea
