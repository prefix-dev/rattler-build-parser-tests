context:
  version: "0.1.3"
  build_number: 0

package:
  name: xvega
  version: ${{ version }}

source:
  url: https://github.com/jupyter-xeus/xvega/archive/${{ version }}.tar.gz
  sha256: 5b8a42723176b1872dc3e2777c6f0b2be95fff8ad54ec1356b26b5af5b645965

build:
  number: ${{ build_number }}

requirements:
  build:
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
    - cmake
    - if: unix
      then:
        - make
  host:
    - nlohmann_json
    - nlohmann_json-abi
    - xproperty >=0.12.1,<0.13.0
  run:
    - ${{ pin_compatible('xproperty', upper_bound='x.x') }}
    - ${{ pin_compatible('nlohmann_json', upper_bound='x.x.x') }}

tests:
  - package_contents:
      files:
        exists:
          - ${{ "Library/" if win }}include/xvega/xvega.hpp
          - ${{ "Library/" if win }}include/xvega/grammar/marks.hpp
          - ${{ "Library/" if win }}include/xvega/utils/random_string.hpp
          - ${{ "Library/" if win }}lib/cmake/xvega/xvegaConfig.cmake
          - ${{ "Library/" if win }}lib/cmake/xvega/xvegaConfigVersion.cmake

about:
  homepage: https://github.com/QuantStack/xvega
  repository: https://github.com/QuantStack/xvega
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: A C++ backend for vega
  description: vega-lite visualization system for the xeus-cling kernel

extra:
  recipe-maintainers:
    - SylvainCorlay
    - madhur-tandon
    - JohanMabille
