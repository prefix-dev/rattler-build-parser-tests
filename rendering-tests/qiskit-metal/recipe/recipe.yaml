schema_version: 1

context:
  name: qiskit-metal
  version: 0.5.1

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/Qiskit/${{ name }}/archive/refs/tags/${{ version }}.tar.gz
  sha256: 9557a92255b0b6e46ed3f6387dfb5fcc9cbaeb0c18d57b509eb23612efae6d12

build:
  number: 0
  noarch: python
  script: ${{ PYTHON }} -m pip install . -vv

requirements:
  host:
    - python ${{ python_min }}.*
    - pip
    - setuptools
  run:
    - python >=${{ python_min }}
    - addict >=2.4,<2.5
    - cython <3.0.0
    - gdstk >=0.9,<0.10
    - geopandas >=0.12.2
    # - gmsh would be here alphabetically but is python-gmsh in conda-forge
    - ipython >=8.10.0
    - matplotlib-base >=3.7,<3.8
    - numpy >=1.24.2,<1.25
    - pandas =1.5.3
    - pint >=0.20,<0.21
    - pyaedt >0.21,<0.22
    - pyepr-quantum >=0.9.0,<0.10
    - pygments >=2.14,<2.15
    - pyside6 >=6.8,<6.9
    - python-gmsh >=4.11.1,<4.12
    - pyyaml >=6.0
    - qdarkstyle >=3.1,<3.2
    - qutip >=4.7.1
    - scipy >=1.10,<1.11
    - scqubits >=3.1.0,<3.2
    - shapely >=2.0,<2.1

tests:
  - python:
      imports:
        - qiskit_metal
      # pip_check disabled because of the following dependency issues:
      # * gmsh conda package does not include metadata: https://github.com/conda-forge/gmsh-feedstock/issues/97
      # * pyaedt does not pin pydantic: https://github.com/conda-forge/pyaedt-feedstock/issues/155
      # * pyaedt is missing pyedb dependency (not packaged in conda-forge): https://github.com/conda-forge/pyaedt-feedstock/issues/155
      pip_check: false
      python_version: ${{ python_min }}.*

about:
  summary: Qiskit Metal | for quantum device design & analysis
  license: Apache-2.0
  license_file: LICENSE.txt
  homepage: https://github.com/qiskit-community/qiskit-metal

extra:
  recipe-maintainers:
    - wshanks
